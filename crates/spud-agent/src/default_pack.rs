use anyhow::Result;

use crate::types::{AsciiFrame, FacePack};

fn frame(lines: &[&str]) -> AsciiFrame {
    AsciiFrame::from_lines(lines)
}

/// Build the embedded default ASCII face pack.
pub(crate) fn load_default_pack() -> Result<FacePack> {
    FacePack::new(vec![
        vec![
            frame(&[
                "      _/_       ",
                "   .-\"\"\"\"\"-.    ",
                "  /  o   o  \\   ",
                " |    ___    |  ",
                " |   /___\\   |  ",
                "  \\  '---'  /   ",
                "   '-.___.-'    ",
            ]),
            frame(&[
                "      _/_       ",
                "   .-\"\"\"\"\"-.    ",
                "  /  -   -  \\   ",
                " |    ___    |  ",
                " |   /___\\   |  ",
                "  \\  '---'  /   ",
                "   '-.___.-'    ",
            ]),
            frame(&[
                "      _/_       ",
                "   .-\"\"\"\"\"-.    ",
                "  /  o   -  \\   ",
                " |    ___    |  ",
                " |   \\___/   |  ",
                "  \\  '---'  /   ",
                "   '-.___.-'    ",
            ]),
        ],
        vec![
            frame(&[
                "      _/_       ",
                "   .-\"\"\"\"\"-.    ",
                "  /  ^   ^  \\   ",
                " |   \\___/   |  ",
                " |    \\_/    |  ",
                "  \\  '---'  /   ",
                "   '-.___.-'    ",
            ]),
            frame(&[
                "      _/_       ",
                "   .-\"\"\"\"\"-.    ",
                "  /  n   n  \\   ",
                " |   \\___/   |  ",
                " |   \\___/   |  ",
                "  \\  '---'  /   ",
                "   '-.___.-'    ",
            ]),
            frame(&[
                "      _/_       ",
                "   .-\"\"\"\"\"-.    ",
                "  /  ^   ^  \\   ",
                " |   \\___/   |  ",
                " |   \\___/   |  ",
                "  \\  \\___/  /   ",
                "   '-.___.-'    ",
            ]),
        ],
        vec![
            frame(&[
                "      _/_       ",
                "   .-\"\"\"\"\"-.    ",
                "  /  >   <  \\   ",
                " |    ___    |  ",
                " |   /___\\   |  ",
                "  \\  /---\\  /   ",
                "   '-.___.-'    ",
            ]),
            frame(&[
                "      _/_       ",
                "   .-\"\"\"\"\"-.    ",
                "  /  >   <  \\   ",
                " |   _____   |  ",
                " |   /___\\   |  ",
                "  \\  /---\\  /   ",
                "   '-.___.-'    ",
            ]),
            frame(&[
                "      _/_       ",
                "   .-\"\"\"\"\"-.    ",
                "  /  >   <  \\   ",
                " |    ___    |  ",
                " |   /---\\   |  ",
                "  \\  '---'  /   ",
                "   '-.___.-'    ",
            ]),
        ],
        vec![
            frame(&[
                "    \\ | /       ",
                "   .-***-.      ",
                "  /  * *  \\     ",
                " |   \\_/   |    ",
                " |  \\___/  |    ",
                "  \\  ***  /     ",
                "   '-***-'      ",
            ]),
            frame(&[
                "     \\|/        ",
                "   .-***-.      ",
                "  /  * *  \\     ",
                " |   ___   |    ",
                " |  /___\\  |    ",
                "  \\  ***  /     ",
                "   '-***-'      ",
            ]),
            frame(&[
                "      |         ",
                "   .-***-.      ",
                "  /  * *  \\     ",
                " |   ___   |    ",
                " |  \\___/  |    ",
                "  \\ *---* /     ",
                "   '-***-'      ",
            ]),
        ],
        vec![
            frame(&[
                "      _/_       ",
                "   .-\"\"\"\"\"-.    ",
                "  /  x   x  \\   ",
                " |    ._.    |  ",
                " |    ~~~    |  ",
                "  \\  '---'  /   ",
                "   '-.___.-'    ",
            ]),
            frame(&[
                "      _/_       ",
                "   .-\"\"\"\"\"-.    ",
                "  /  x   X  \\   ",
                " |    ___    |  ",
                " |    _~_    |  ",
                "  \\  '---'  /   ",
                "   '-.___.-'    ",
            ]),
            frame(&[
                "      _/_       ",
                "   .-\"\"\"\"\"-.    ",
                "  /  X   x  \\   ",
                " |    ___    |  ",
                " |    ._.    |  ",
                "  \\  '---'  /   ",
                "   '-.___.-'    ",
            ]),
        ],
        vec![
            frame(&[
                "      _/_    ?  ",
                "   .-\"\"\"\"\"-.    ",
                "  /  o   -  \\   ",
                " |    hmm    |  ",
                " |   /___\\   |  ",
                "  \\  '---'  /   ",
                "   '-.___.-'    ",
            ]),
            frame(&[
                "      _/_    ?  ",
                "   .-\"\"\"\"\"-.    ",
                "  /  -   o  \\   ",
                " |    hmm    |  ",
                " |   /___\\   |  ",
                "  \\  '---'  /   ",
                "   '-.___.-'    ",
            ]),
            frame(&[
                "      _/_   ??  ",
                "   .-\"\"\"\"\"-.    ",
                "  /  o   o  \\   ",
                " |   hmmm?   |  ",
                " |   /___\\   |  ",
                "  \\  '---'  /   ",
                "   '-.___.-'    ",
            ]),
        ],
    ])
}

#[cfg(test)]
mod tests {
    use super::*;
    use crate::types::Mood;

    #[test]
    fn default_pack_is_valid() {
        let pack = load_default_pack().unwrap();
        assert_eq!(pack.frames.len(), Mood::COUNT);
        assert_eq!(pack.frames_per_mood, 3);
    }
}
